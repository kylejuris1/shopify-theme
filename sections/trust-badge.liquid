<section class="unikor-trust">
  <div class="page-width">
    {% if section.settings.heading != blank %}
      <h2 class="unikor-trust__heading">{{ section.settings.heading }}</h2>
    {% endif %}
    <div class="unikor-trust__videos">
      {% for block in section.blocks %}
        {% if block.type == 'video' %}
          <div class="unikor-trust__video-card" {{ block.shopify_attributes }}>
            {% if block.settings.video_thumbnail != blank %}
              <img src="{{ block.settings.video_thumbnail | image_url: width: 400 }}" alt="" width="400" height="250" loading="lazy">
            {% else %}
              <div class="unikor-trust__video-placeholder"><span>Vidéo {{ forloop.index }}</span></div>
            {% endif %}
            {% if block.settings.video_url != blank %}
              <a href="{{ block.settings.video_url }}" target="_blank" rel="noopener" class="unikor-trust__play" aria-label="Lire la vidéo">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10" fill="rgba(0,0,0,0.6)"/><path d="M10 8v8l6-4-6-4z" fill="#fff"/></svg>
              </a>
            {% else %}
              <button type="button" class="unikor-trust__play" aria-label="Lire la vidéo" disabled>
                <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10" fill="rgba(0,0,0,0.6)"/><path d="M10 8v8l6-4-6-4z" fill="#fff"/></svg>
              </button>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
      {% if section.blocks.size == 0 %}
        <div class="unikor-trust__video-card">
          <div class="unikor-trust__video-placeholder"><span>Add video blocks in the theme editor</span></div>
        </div>
      {% endif %}
    </div>
    <div class="unikor-trust__dot" aria-hidden="true"></div>
  </div>
</section>

{% schema %}
{
  "name": "Video testimonials",
  "class": "section-trust-badge",
  "tag": "section",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Plus de 11 000 familles satisfaites" }
  ],
  "blocks": [
    {
      "type": "video",
      "name": "Video",
      "settings": [
        { "type": "image_picker", "id": "video_thumbnail", "label": "Thumbnail image" },
        { "type": "url", "id": "video_url", "label": "Video URL (YouTube, Vimeo, or direct link)" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Video testimonials",
      "settings": { "heading": "Plus de 11 000 familles satisfaites" },
      "blocks": [
        { "type": "video" },
        { "type": "video" },
        { "type": "video" }
      ]
    }
  ]
}
{% endschema %}
