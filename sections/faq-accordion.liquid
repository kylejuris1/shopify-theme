<section class="unikor-faq">
  <div class="page-width">
    <p class="unikor-faq__eyebrow">VOUS AVEZ DES QUESTIONS ?</p>
    <h2 class="unikor-faq__heading">On a les réponses !</h2>
    <div class="unikor-faq__list">
      {% for block in section.blocks %}
        {% if block.type == 'faq_item' %}
          <div class="unikor-faq__item" {{ block.shopify_attributes }}>
            <button type="button" class="unikor-faq__trigger" aria-expanded="false" aria-controls="faq-{{ section.id }}-{{ block.id }}" id="faq-t-{{ section.id }}-{{ block.id }}">
              <span class="unikor-faq__qicon">?</span>
              <span class="unikor-faq__qtext">{{ block.settings.question }}</span>
              <span class="unikor-faq__chevron">⌄</span>
            </button>
            <div class="unikor-faq__panel" id="faq-{{ section.id }}-{{ block.id }}" role="region" aria-labelledby="faq-t-{{ section.id }}-{{ block.id }}">
              <div class="unikor-faq__panel-inner">{{ block.settings.answer }}</div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

<script>
(function(){
  document.querySelectorAll('.unikor-faq__trigger').forEach(function(btn){
    btn.addEventListener('click', function(){
      var item = this.closest('.unikor-faq__item');
      var open = item.classList.contains('is-open');
      document.querySelectorAll('.unikor-faq__item').forEach(function(i){ i.classList.remove('is-open'); i.querySelector('.unikor-faq__trigger').setAttribute('aria-expanded', 'false'); });
      var panel = item.querySelector('.unikor-faq__panel');
      if (!open) { item.classList.add('is-open'); this.setAttribute('aria-expanded', 'true'); if (panel) panel.style.maxHeight = panel.scrollHeight + 'px'; }
      else if (panel) panel.style.maxHeight = '0';
    });
  });
  document.querySelectorAll('.unikor-faq__panel').forEach(function(p){ p.style.maxHeight = '0'; });
})();
</script>

{% schema %}
{
  "name": "FAQ (Harba)",
  "class": "section-faq-unikor",
  "tag": "section",
  "settings": [],
  "blocks": [
    { "type": "faq_item", "name": "FAQ item", "settings": [
      { "type": "text", "id": "question", "label": "Question" },
      { "type": "textarea", "id": "answer", "label": "Answer" }
    ]}
  ]
}
{% endschema %}
